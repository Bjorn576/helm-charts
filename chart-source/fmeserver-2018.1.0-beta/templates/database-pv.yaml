{{ if .Values.storage.useHostDir }}
apiVersion: v1
kind: PersistentVolume
metadata:
  name: fmeserver-db-{{ required "A published fmeserver.buildNr needs to be passed in." .Values.fmeserver.buildNr }}
spec:
  {{- with .Values.storage }}
  capacity:
    storage: {{ .database.size }}
  accessModes:
  - ReadWriteOnce
  persistentVolumeReclaimPolicy: {{ .reclaimPolicy }}
  hostPath:
    path: {{ .database.path | default "/tmp/k8s/fmeserver_db" }}
    type: DirectoryOrCreate
  {{- end }}
{{ end }}